<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="pageTitle">LLM Setup - Documentation Soul of Waifu</title>
    <link rel="icon" type="image/x-icon" href="../../assets/icons/logotype.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        :root {
            /* Dark Theme Colors */
            --dark-primary: #4361ee;
            --dark-primary-dark: #3a56d4;
            --dark-primary-light: #4868ff;
            --dark-secondary: #7209b7;
            --dark-accent: #4cc9f0;
            --dark-dark: #0f172a;
            --dark-darker: #0c1221;
            --dark-darkest: #080c16;
            --dark-light: #f1f5f9;
            --dark-gray: #94a3b8;
            --dark-card-bg: rgba(30, 41, 59, 0.7);
            --dark-card-border: rgba(71, 85, 105, 0.5);
            --dark-section-bg: rgba(15, 23, 42, 0.6);
            --dark-code-bg: #1e293b;
            --dark-hover: rgba(67, 97, 238, 0.15);

            /* Light Theme Colors */
            --light-primary: #4361ee;
            --light-primary-dark: #3a56d4;
            --light-primary-light: #4868ff;
            --light-secondary: #7209b7;
            --light-accent: #4cc9f0;
            --light-dark: #0f172a;
            --light-darker: #0c1221;
            --light-darkest: #080c16;
            --light-light: #f8fafc;
            --light-gray: #64748b;
            --light-card-bg: rgba(255, 255, 255, 0.9);
            --light-card-border: rgba(203, 213, 225, 0.8);
            --light-section-bg: rgba(241, 245, 249, 0.8);
            --light-code-bg: #f1f5f9;
            --light-hover: rgba(67, 97, 238, 0.1);

            /* Current Theme */
            --primary: var(--dark-primary);
            --primary-dark: var(--dark-primary-dark);
            --primary-light: var(--dark-primary-light);
            --secondary: var(--dark-secondary);
            --accent: var(--dark-accent);
            --dark: var(--dark-dark);
            --darker: var(--dark-darker);
            --darkest: var(--dark-darkest);
            --light: var(--dark-light);
            --gray: var(--dark-gray);
            --card-bg: var(--dark-card-bg);
            --card-border: var(--dark-card-border);
            --section-bg: var(--dark-section-bg);
            --code-bg: var(--dark-code-bg);
            --hover: var(--dark-hover);
        }
        body {
            background: linear-gradient(135deg, var(--darker), var(--darkest));
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        body.light-theme {
            --primary: var(--light-primary);
            --primary-dark: var(--light-primary-dark);
            --primary-light: var(--light-primary-light);
            --secondary: var(--light-secondary);
            --accent: var(--light-accent);
            --dark: var(--light-dark);
            --darker: var(--light-darker);
            --darkest: var(--light-darkest);
            --light: var(--light-dark);
            --gray: var(--light-gray);
            --card-bg: var(--light-card-bg);
            --card-border: var(--light-card-border);
            --section-bg: var(--light-section-bg);
            --code-bg: var(--light-code-bg);
            --hover: var(--light-hover);
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            color: var(--dark);
        }
        header {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--card-border);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        body.light-theme header {
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid var(--card-border);
        }
        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-bottom: 10px;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            position: relative;
        }
        .logo a {
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            text-decoration: none;
        }
        body.light-theme .logo-text {
            color: var(--dark);
        }
        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .social-icons {
            display: flex;
            gap: 0.5rem;
        }
        .social-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid var(--card-border);
        }
        body.light-theme .social-icon {
            background: rgba(255, 255, 255, 0.8);
            color: var(--dark);
        }
        .social-icon:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .theme-language-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        .theme-toggle {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            width: 50px;
            height: 25px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .theme-toggle-slider {
            position: absolute;
            top: 1px;
            left: 1px;
            width: 21px;
            height: 21px;
            background: var(--primary-light);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        body.light-theme .theme-toggle-slider {
            transform: translateX(25px);
        }
        .language-selector {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 0.3rem 0.8rem;
            color: var(--light);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        body.light-theme .language-selector {
            color: var(--dark);
        }
        .doc-container {
            display: flex;
            min-height: 100vh;
            padding-top: 78px;
        }
        .doc-sidebar {
            width: 280px;
            background: var(--card-bg);
            border-right: 1px solid var(--card-border);
            padding: 2rem 1rem;
            position: fixed;
            height: calc(100vh - 76px);
            overflow-y: auto;
            transition: all 0.3s ease;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-light) var(--card-bg);
        }
        .doc-sidebar::-webkit-scrollbar {
            width: 8px;
        }
        .doc-sidebar::-webkit-scrollbar-track {
            background: var(--card-bg);
            border-radius: 4px;
        }
        .doc-sidebar::-webkit-scrollbar-thumb {
            background-color: var(--primary-light);
            border-radius: 4px;
            border: 2px solid var(--card-bg);
        }
        .doc-sidebar h3 {
            color: var(--primary-light);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--card-border);
            font-size: 1.1rem;
        }
        .doc-sidebar ul {
            list-style: none;
            margin-bottom: 2rem;
        }
        .doc-sidebar ul li {
            margin-bottom: 0.3rem;
        }
        .doc-sidebar a {
            color: #cbd5e1;
            text-decoration: none;
            display: block;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }
        body.light-theme .doc-sidebar a {
            color: #4a5568;
        }
        .doc-sidebar a:hover {
            background: var(--hover);
            color: var(--primary-light);
        }
        .doc-sidebar a.active {
            background: var(--primary);
            color: white !important;
        }
        body.light-theme .doc-sidebar a.active {
            color: white !important;
        }
        .doc-main {
            flex: 1;
            margin-left: 280px;
            padding: 2rem;
        }
        .doc-content {
            max-width: 900px;
            margin: 0 auto;
        }
        .doc-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: white;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--card-border);
            scroll-margin-top: 100px;
        }
        body.light-theme .doc-content h1 {
            color: var(--dark);
        }
        .doc-content h2 {
            font-size: 2rem;
            margin: 2rem 0 1rem;
            color: white;
            scroll-margin-top: 100px;
            position: relative;
            padding-left: 1.5rem;
        }
        body.light-theme .doc-content h2 {
            color: var(--dark);
        }
        .doc-content h2:before {
            content: "";
            position: absolute;
            left: 0;
            top: 0.5rem;
            width: 4px;
            height: 1.5rem;
            background: var(--primary-light);
            border-radius: 2px;
        }
        .doc-content h3 {
            font-size: 1.5rem;
            margin: 1.5rem 0 1rem;
            color: white;
            scroll-margin-top: 100px;
        }
        body.light-theme .doc-content h3 {
            color: var(--dark);
        }
        .doc-content p {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
            color: #cbd5e1;
        }
        body.light-theme .doc-content p {
            color: #4a5568;
        }
        .doc-content ul, 
        .doc-content ol {
            margin: 1rem 0 1.5rem 2rem;
        }
        .doc-content li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
            color: #cbd5e1;
        }
        body.light-theme .doc-content li {
            color: #4a5568;
        }
        .doc-content code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: var(--accent);
            font-size: 0.95rem;
        }
        .doc-content pre {
            background: var(--code-bg);
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--card-border);
            position: relative;
        }
        body.light-theme .doc-content pre {
            background: #f1f5f9;
        }
        .doc-content pre code {
            background: none;
            padding: 0;
            color: #cbd5e1;
        }
        body.light-theme .doc-content pre code {
            color: #4a5568;
        }
        .doc-content .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--primary-light);
            background: rgba(67, 97, 238, 0.1);
            position: relative;
            padding-left: 3rem;
        }
        body.light-theme .doc-content .alert {
            background: rgba(67, 97, 238, 0.05);
        }
        .doc-content .alert:before {
            content: "!";
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
            background: var(--primary-light);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .doc-content .alert-warning {
            border-left-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }
        body.light-theme .doc-content .alert-warning {
            background: rgba(245, 158, 11, 0.05);
        }
        .doc-content .alert-warning:before {
            background: #f59e0b;
        }
        .doc-content .alert-info {
            border-left-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }
        body.light-theme .doc-content .alert-info {
            background: rgba(59, 130, 246, 0.05);
        }
        .doc-content .alert-info:before {
            background: #3b82f6;
        }
        .model-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            overflow: hidden;
        }
        .model-table th,
        .model-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--card-border);
        }
        .model-table th {
            background: rgba(67, 97, 238, 0.15);
            color: var(--primary-light);
            font-weight: 600;
        }
        .model-table tr:last-child td {
            border-bottom: none;
        }
        body.light-theme .model-table th {
            background: rgba(67, 97, 238, 0.1);
        }
        .screenshot-container {
            text-align: center;
            margin: 1.5rem 0;
        }
        .screenshot-container img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            border: 1px solid var(--card-border);
        }
        .toc {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 10px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .toc h3 {
            color: var(--primary-light);
            margin-bottom: 1rem;
            margin-top: 0.5rem;
        }
        .toc ul {
            list-style: none;
            margin: 0;
        }
        .toc ul li {
            margin-bottom: 0.5rem;
        }
        .toc ul li a {
            color: var(--primary-light);
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        .toc ul li a:before {
            content: "→";
            margin-right: 0.5rem;
        }
        .pagination {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--card-border);
        }
        .pagination-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-light);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
        }
        .pagination-link:hover {
            background: var(--hover);
        }
        .pagination-next {
            margin-left: auto;
        }
        @media (max-width: 1200px) {
            .doc-sidebar {
                width: 240px;
            }
            .doc-main {
                margin-left: 240px;
            }
        }
        @media (max-width: 992px) {
            .doc-container {
                flex-direction: column;
            }
            .doc-sidebar {
                width: 100%;
                position: relative;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--card-border);
            }
            .doc-main {
                margin-left: 0;
            }
        }
        @media (max-width: 768px) {
            header {
                padding: 1rem;
            }
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            .logo {
                align-self: flex-start;
            }
            .header-controls {
                width: 100%;
                flex-wrap: wrap;
            }
            .social-icons {
                margin-left: auto;
            }
            .theme-language-controls {
                margin-left: auto;
            }
            .doc-content h1 {
                font-size: 2rem;
            }
            .doc-content h2 {
                font-size: 1.7rem;
            }
            .doc-content h3 {
                font-size: 1.4rem;
            }
        }
        @media (max-width: 480px) {
            .social-icon span {
                display: none;
            }
            .social-icon {
                width: 32px;
                height: 32px;
            }
            .doc-content h1 {
                font-size: 1.8rem;
            }
            .doc-content h2 {
                font-size: 1.5rem;
            }
            .doc-content h3 {
                font-size: 1.3rem;
            }
            .doc-content p {
                font-size: 1rem;
            }
        }
        footer {
            background: var(--darkest);
            padding: 1rem;
            border-top: 1px solid var(--card-border);
            text-align: center;
        }
        body.light-theme footer {
            background: #f8fafc;
            border-top: 1px solid var(--card-border);
        }
        .footer-content {
            margin: auto;
            text-align: right;
            color: #94a3b8;
        }
        body.light-theme .footer-content {
            color: #718096;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .doc-content > * {
            animation: fadeIn 0.5s ease-out;
        }
        .screenshots-row {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .screenshots-row .screenshot-container {
            flex: 1;
            margin: 0;
        }
        @media (max-width: 768px) {
            .screenshots-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="../../index.html">
                    <div class="logo-icon">
                        <img src="../../assets/icons/logotitle.png" alt="logotype" width="160px" height="50px" class="logo-dark">
                        <img src="../../assets/icons/logotitle_black.png" alt="logotype" width="160px" height="50px" class="logo-light" style="display: none;">
                    </div>
                </a>
            </div>
            <div class="header-controls">
                <div class="social-icons">
                    <a href="https://github.com/jofizcd/Soul-of-Waifu" class="social-icon" title="GitHub" data-translate-title="githubTitle">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="https://discord.com/invite/6vFtQGVfxM" class="social-icon" title="Discord" data-translate-title="discordTitle">
                        <i class="fab fa-discord"></i>
                    </a>
                    <a href="https://www.donationalerts.com/r/jofizcd" class="social-icon" title="Donation Alerts">
                        <i class="fa-solid fa-hand-holding-dollar"></i>
                    </a>
                </div>
                <div class="theme-language-controls">
                    <div class="theme-toggle" id="themeToggle">
                        <div class="theme-toggle-slider"></div>
                    </div>
                    <select class="language-selector" id="languageSelector">
                        <option value="ru">RU</option>
                        <option value="en">EN</option>
                    </select>
                </div>
            </div>
        </div>
    </header>
    <div class="doc-container">
        <aside class="doc-sidebar">
            <h3 class="sidebar-title" data-translate-key="sidebarTitle">Содержание</h3>
            <ul>
                <li><a href="../overview/overview.html" class="sidebar-introduction" data-translate-key="sidebarIntroduction">Введение</a></li>
                <li><a href="../installation/installation.html" class="sidebar-installation" data-translate-key="sidebarInstallation">Установка</a></li>
                <li><a href="../quick-start/quickstart.html" class="sidebar-quick-start" data-translate-key="sidebarQuickStart">Быстрый старт</a></li>
                <li><a href="../character-creation/character-creation.html" class="sidebar-character-creation" data-translate-key="sidebarCharacterCreation">Создание персонажей</a></li>
                <li><a href="llm-setup.html" class="sidebar-llm-setup active" data-translate-key="sidebarLlmSetup">Настройка моделей</a></li>
                <li><a href="../tts/tts.html" class="sidebar-tts-stt" data-translate-key="sidebarTtsStt">Озвучка</a></li>
                <li><a href="../avatars/avatars.html" class="sidebar-avatars" data-translate-key="sidebarAvatars">Аватары персонажей</a></li>
            </ul>
            <h3 class="sidebar-course-title" data-translate-key="sidebarCourseTitle">Вводный курс в AI RP</h3>
            <ul>
                <li><a href="../course/about-llm/llm.html" class="sidebar-course-llm" data-translate-key="sidebarCourseLlm">Всё про LLM</a></li>
                <li><a href="../course/persona/persona.html" class="sidebar-course-persona" data-translate-key="sidebarCoursePersona">Персона</a></li>
                <li><a href="../course/system-prompt/system-prompt.html" class="sidebar-course-system-prompt" data-translate-key="sidebarCourseSystemPrompt">Системный промпт</a></li>
                <li><a href="../course/lorebooks/lorebooks.html" class="sidebar-course-lorebooks" data-translate-key="sidebarCourseLorebooks">Лорбуки</a></li>
                <li><a href="../course/smart-memory/smart-memory.html" class="sidebar-course-smartmemory" data-translate-key="sidebarCourseSmartMemory">Умная Память</a></li>
                <li><a href="../course/sow-system/sow-system.html" class="sidebar-course-soul-system" data-translate-key="sidebarCourseSoulSystem">Soul of Waifu System</a></li>
            </ul>
            <h3 class="sidebar-development-title" data-translate-key="sidebarDevelopmentTitle">Развитие программы</h3>
            <ul>
                <li><a href="../program-support/community/community.html" class="sidebar-community" data-translate-key="sidebarCommunity">Сообщество</a></li>
                <li><a href="../program-support/support/support.html" class="sidebar-support" data-translate-key="sidebarSupport">Поддержать автора</a></li>
            </ul>
        </aside>
        <main class="doc-main">
            <div class="doc-content">
                <h1 id="llm-setup" class="doc-title" data-translate-key="docTitle">Настройка моделей</h1>
                <p class="doc-intro" data-translate-key="docIntro">В этом разделе мы рассмотрим все параметры, которые можно изменить у языковых моделей, чтобы повлиять на генерацию текста. Для того, чтобы изменить настройки языковых моделей, перейдите в настройки и там выберите "Настройки LLM". Вы попадёте в настройки языковых моделей. В верхней части находятся настройки локальных языковых моделей, а в нижней части - для всех языковых моделей, как облачных, так и локальных.</p>
                
                <div class="toc">
                    <h3 data-translate-key="tocTitle">Содержание раздела</h3>
                    <ul>
                        <li><a href="#local-models-settings" data-translate-key="tocLocalModelsSettings">Настройки локальных моделей</a></li>
                        <li><a href="#device-selection" data-translate-key="tocDeviceSelection">Выбор устройства</a></li>
                        <li><a href="#gpu-layers" data-translate-key="tocGpuLayers">GPU Layers</a></li>
                        <li><a href="#context-size" data-translate-key="tocContextSize">Context Size</a></li>
                        <li><a href="#mlock" data-translate-key="tocMlock">MLock</a></li>
                        <li><a href="#flash-attention" data-translate-key="tocFlashAttention">Flash Attention</a></li>
                        <li><a href="#general-settings" data-translate-key="tocGeneralSettings">Общие настройки</a></li>
                        <li><a href="#temperature" data-translate-key="tocTemperature">Температура</a></li>
                        <li><a href="#top-p" data-translate-key="tocTopP">Top P</a></li>
                        <li><a href="#repeat-penalty" data-translate-key="tocRepeatPenalty">Repeat Penalty</a></li>
                        <li><a href="#max-tokens" data-translate-key="tocMaxTokens">Max Tokens</a></li>
                    </ul>
                </div>
                
                <div class="screenshot-container">
                    <img src="../../assets/screenshots/llmsettings_1.png" alt="Настройка модели в программе" data-translate-alt="programSetupScreenshotAlt">
                    <p class="screenshot-caption" data-translate-key="programSetupCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Настройка модели в программе</p>
                </div>
                
                <p data-translate-key="externalUsageText">Если вы захотите использовать локальную языковую модель в других приложениях или играх, запустите свою локальную языковую модель через Хаб моделей и скопируйте адрес, к которому может обращаться игра, чтобы генерировать текст. Например, в игре My Robot для того, чтобы общаться с роботом, необходимо подключить языковую модель. Благодаря Soul of Waifu вы можете подключить запущенную в программе модель к игре и таким образом робот сможет с вами общаться.</p>
                
                <div class="screenshots-row">
                    <div class="screenshot-container">
                        <img src="../../assets/screenshots/llmsettings_2.png" alt="Настройки языковых моделей для видеокарт" data-translate-alt="gpuSettingsScreenshotAlt">
                        <p class="screenshot-caption" data-translate-key="gpuSettingsCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Настройки языковых моделей для видеокарт</p>
                    </div>
                    <div class="screenshot-container">
                        <img src="../../assets/screenshots/llmsettings_3.jpg" alt="Робот в игре My Robot" data-translate-alt="robotGameScreenshotAlt">
                        <p class="screenshot-caption" data-translate-key="robotGameCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Робот в игре My Robot</p>
                    </div>
                </div>
                
                <h2 id="device-selection" data-translate-key="deviceSelectionTitle">Выбор устройства</h2>
                
                <p data-translate-key="deviceSelectionText">Следующая настройка отвечает за выбор устройства, на котором будет происходить генерация текста - процессор или видеокарта. На процессоре генерация токенов будет происходить гораздо медленнее, чем на видеокарте, но зато вы сможете запускать локальные языковые модели даже на старых системах, хоть и с ограничениями по скорости.</p>
                
                <p data-translate-key="backendSelectionText">Если вы выбрали видеокарту, то следующим шагом будет выбор бэкенда. Тут всё достаточно просто - если у вас видеокарта NVIDIA, то выбирайте CUDA, а если что-то другое, то выбирайте Vulkan. С поддержкой CUDA ядер скорость генерации текста несколько выше, чем при использовании Vulkan, но главное, что будут поддерживаться любые видеокарты.</p>
                
                <h2 id="gpu-layers" data-translate-key="gpuLayersTitle">GPU Layers</h2>
                
                <p data-translate-key="gpuLayersText">Это количество слоев модели, которые будут обрабатываться на GPU. Диапазон от 0 до максимального количества слоев. Если у модели всего 35 слоев, тогда даже если вы введете 1000, в видеокарту загрузятся все слои модели, то есть 35. По умолчанию видеокартой будут обрабатываться 20 слоев локальной языковой модели, это обеспечивает баланс между скоростью и качеством вывода. Чем больше слоев на GPU, тем выше скорость генерации токенов, но для этого требуется больше видеопамяти.</p>
                
                <h2 id="context-size" data-translate-key="contextSizeTitle">Context Size</h2>
                
                <p data-translate-key="contextSizeText">Это максимальная длина контекста (количество токенов), выделенных модели для обработки информации. Она включает в себя всю информацию с карточки персонажа, системный промпт, лорбук, авторские заметки и историю чата (все сообщения в чате). Обратите внимание, что модель учитывает за один запрос ровно столько токенов, сколько указано в параметре Context Size, и это значение применяется при запуске модели. Изменения в настройке не вступают в силу, пока модель не будет перезапущена. Если некоторая информация о персонаже или о чате выходит за рамки контекстного окна, модель забывает её и больше не может ею оперировать.</p>
                
                <h2 id="mlock" data-translate-key="mlockTitle">MLock</h2>
                
                <p data-translate-key="mlockText">Эта настройка отвечает за фиксацию языковой модели в оперативной памяти насильно, что предотвращает выгрузку модели из кэша, ускоряя последующие запросы к ней. Но включать её надо только в том случае, если у вас много свободной оперативной памяти.</p>
                
                <h2 id="flash-attention" data-translate-key="flashAttentionTitle">Flash Attention</h2>
                
                <p data-translate-key="flashAttentionText">Отвечает за оптимизацию механизма внимания, ускоряя вычисления. Он снижает время генерации ответов от персонажа за счёт более эффективного распределения вычислительных ресурсов вашего компьютера. Если у вас видеокарта от NVIDIA, обязательно её включайте. Более подробно об этой технологии вы сможете узнать в "Вводном курсе в AI RP".</p>
                
                <h2 id="general-settings" data-translate-key="generalSettingsTitle">Общие настройки языковых моделей</h2>
                
                <p data-translate-key="generalSettingsText">Теперь переходим к общим настройкам языковых моделей как облачных, так и локальных.</p>
                
                <h2 id="temperature" data-translate-key="temperatureTitle">Температура</h2>
                
                <p data-translate-key="temperatureText">Отвечает за уровень случайности и предсказуемости генерируемого текста. При генерации следующего токена модель вычисляет вероятности для всех возможных вариантов. При низкой температуре (от 0.1 до 0.5) модель выбирает наиболее вероятные варианты, ответы становятся детерминированными, технически точными. При средних значениях (от 0.6 до 0.9) проявляется баланс между логичностью и креативностью ответов, в большинстве случаев именно эти значения будут хорошо работать в диалогах. При высоких значениях (от 1.0 до 2.0) ответы становятся нестандартными, хаотичными, модель перестает следовать заданной инструкции.</p>
                
                <h2 id="top-p" data-translate-key="topPTitle">Top P</h2>
                
                <p data-translate-key="topPText">Регулирует порог вероятности для выбора следующего токена, определяет, сколько вариантов модель будет учитывать при генерации. Модель сортирует все возможные токены по убыванию вероятности, затем через параметр Top P задаётся кумулятивная вероятность. Например, если значение Top P = 0.9, тогда модель будет брать токены, суммарная вероятность которых составляет 90%, а остальные 10% отбрасываются. Чем меньше значение, тем более однообразные сообщения получаются при генерации.</p>
                
                <h2 id="repeat-penalty" data-translate-key="repeatPenaltyTitle">Repeat Penalty</h2>
                
                <p data-translate-key="repeatPenaltyText">Отвечает за степень подавления повторяющихся слов или фраз. Если значение > 1.0, вероятность повторения уже использованных токенов понижается. При значении 1.0 повторы остаются без штрафования. Однако слишком высокие значения могут сделать текст неестественным, так как даже повторяющиеся местоимения будут отбрасываться при генерации. Рекомендую ставить значения от 1.3 до 1.5, чтобы ответы не повторялись.</p>
                
                <h2 id="max-tokens" data-translate-key="maxTokensTitle">Max Tokens</h2>
                
                <p data-translate-key="maxTokensText">Регулирует максимальную длину генерируемого ответа (в токенах). Как мы знаем, токен - это минимальная единица текста (слово, часть слова, знак препинания). Модель останавливает генерацию текста, как только достигает лимита заданного в настройках, даже если ответ не был логически завершён.</p>
                
                <div class="alert alert-warning">
                    <strong data-translate-key="importantTitle">Важно!</strong> 
                    <span data-translate-key="importantText">Разные модели могут требовать разные значения температуры и Top P, поэтому сидеть на одних настройках долго не получится. Эти два параметра взаимосвязаны - при высокой температуре, но низком Top P, модель может вести себя нестандартно и не следовать системному промпту. Будьте аккуратны.</span>
                </div>
                
                <p data-translate-key="nextPageText">На следующей странице вы сможете ознакомиться с разными Text-to-Speech системами, которые поддерживает Soul of Waifu с примерами.</p>
                
                <div class="pagination">
                    <a href="../character-creation/character-creation.html" class="pagination-link pagination-prev">
                        <i class="fas fa-arrow-left"></i> <span class="pagination-prev-text" data-translate-key="paginationPrev">Создание персонажей</span>
                    </a>
                    <a href="../tts/tts.html" class="pagination-link pagination-next">
                        <span class="pagination-next-text" data-translate-key="paginationNext">Озвучка</span> <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </main>
    </div>
    <footer>
        <div class="footer-content">
            <p class="copyright-text" data-translate-key="copyrightText">&copy; 2025 Soul of Waifu. Разработал jofizcd.</p>
        </div>
    </footer>
    <script>
        const translations = {
            ru: {
                pageTitle: "Настройка моделей - Документация Soul of Waifu",
                githubTitle: "GitHub",
                discordTitle: "Discord",
                sidebarTitle: "Содержание",
                sidebarIntroduction: "Введение",
                sidebarInstallation: "Установка",
                sidebarQuickStart: "Быстрый старт",
                sidebarCharacterCreation: "Создание персонажей",
                sidebarLlmSetup: "Настройка моделей",
                sidebarTtsStt: "Озвучка",
                sidebarAvatars: "Аватары персонажей",
                sidebarCourseTitle: "Вводный курс в AI RP",
                sidebarCourseLlm: "Всё про LLM",
                sidebarCoursePersona: "Персона",
                sidebarCourseSystemPrompt: "Системный промпт",
                sidebarCourseLorebooks: "Лорбуки",
                sidebarCourseSmartMemory: "Умная Память",
                sidebarCourseSoulSystem: "Soul of Waifu System",
                sidebarDevelopmentTitle: "Развитие программы",
                sidebarCommunity: "Сообщество",
                sidebarSupport: "Поддержать автора",
                docTitle: "Настройка моделей",
                docIntro: "В этом разделе мы рассмотрим все параметры, которые можно изменить у языковых моделей, чтобы повлиять на генерацию текста. Для того, чтобы изменить настройки языковых моделей, перейдите в настройки и там выберите \"Настройки LLM\". Вы попадёте в настройки языковых моделей. В верхней части находятся настройки локальных языковых моделей, а в нижней части - для всех языковых моделей, как облачных, так и локальных.",
                tocTitle: "Содержание раздела",
                tocLocalModelsSettings: "Настройки локальных моделей",
                tocDeviceSelection: "Выбор устройства",
                tocGpuLayers: "GPU Layers",
                tocContextSize: "Context Size",
                tocMlock: "MLock",
                tocFlashAttention: "Flash Attention",
                tocGeneralSettings: "Общие настройки",
                tocTemperature: "Температура",
                tocTopP: "Top P",
                tocRepeatPenalty: "Repeat Penalty",
                tocMaxTokens: "Max Tokens",
                gpuSettingsScreenshotAlt: "Настройки языковых моделей для видеокарт",
                gpuSettingsCaption: "Настройки языковых моделей для видеокарт",
                externalUsageText: "Если вы захотите использовать локальную языковую модель в других приложениях или играх, запустите свою локальную языковую модель через Хаб моделей и скопируйте адрес, к которому может обращаться игра, чтобы генерировать текст. Например, в игре My Robot для того, чтобы общаться с роботом, необходимо подключить языковую модель. Благодаря Soul of Waifu вы можете подключить запущенную в программе модель к игре и таким образом робот сможет с вами общаться.",
                programSetupScreenshotAlt: "Настройка модели в программе",
                programSetupCaption: "Настройка модели в программе",
                robotGameScreenshotAlt: "Робот в игре My Robot",
                robotGameCaption: "Робот в игре My Robot",
                deviceSelectionTitle: "Выбор устройства",
                deviceSelectionText: "Следующая настройка отвечает за выбор устройства, на котором будет происходить генерация текста - процессор или видеокарта. На процессоре генерация токенов будет происходить гораздо медленнее, чем на видеокарте, но зато вы сможете запускать локальные языковые модели даже на старых системах, хоть и с ограничениями по скорости.",
                backendSelectionText: "Если вы выбрали видеокарту, то следующим шагом будет выбор бэкенда. Тут всё достаточно просто - если у вас видеокарта NVIDIA, то выбирайте CUDA, а если что-то другое, то выбирайте Vulkan. С поддержкой CUDA ядер скорость генерации текста несколько выше, чем при использовании Vulkan, но главное, что будут поддерживаться любые видеокарты.",
                gpuLayersTitle: "GPU Layers",
                gpuLayersText: "Это количество слоев модели, которые будут обрабатываться на GPU. Диапазон от 0 до максимального количества слоев. Если у модели всего 35 слоев, тогда даже если вы введете 1000, в видеокарту загрузятся все слои модели, то есть 35. По умолчанию видеокартой будут обрабатываться 20 слоев локальной языковой модели, это обеспечивает баланс между скоростью и качеством вывода. Чем больше слоев на GPU, тем выше скорость генерации токенов, но для этого требуется больше видеопамяти.",
                contextSizeTitle: "Context Size",
                contextSizeText: "Это максимальная длина контекста (количество токенов), выделенных модели для обработки информации. Она включает в себя всю информацию с карточки персонажа, системный промпт, лорбук, авторские заметки и историю чата (все сообщения в чате). Обратите внимание, что модель учитывает за один запрос ровно столько токенов, сколько указано в параметре Context Size, и это значение применяется при запуске модели. Изменения в настройке не вступают в силу, пока модель не будет перезапущена. Если некоторая информация о персонаже или о чате выходит за рамки контекстного окна, модель забывает её и больше не может ею оперировать.",
                mlockTitle: "MLock",
                mlockText: "Эта настройка отвечает за фиксацию языковой модели в оперативной памяти насильно, что предотвращает выгрузку модели из кэша, ускоряя последующие запросы к ней. Но включать её надо только в том случае, если у вас много свободной оперативной памяти.",
                flashAttentionTitle: "Flash Attention",
                flashAttentionText: "Отвечает за оптимизацию механизма внимания, ускоряя вычисления. Он снижает время генерации ответов от персонажа за счёт более эффективного распределения вычислительных ресурсов вашего компьютера. Если у вас видеокарта от NVIDIA, обязательно её включайте. Более подробно об этой технологии вы сможете узнать в \"Вводном курсе в AI RP\".",
                generalSettingsTitle: "Общие настройки языковых моделей",
                generalSettingsText: "Теперь переходим к общим настройкам языковых моделей как облачных, так и локальных.",
                temperatureTitle: "Температура",
                temperatureText: "Отвечает за уровень случайности и предсказуемости генерируемого текста. При генерации следующего токена модель вычисляет вероятности для всех возможных вариантов. При низкой температуре (от 0.1 до 0.5) модель выбирает наиболее вероятные варианты, ответы становятся детерминированными, технически точными. При средних значениях (от 0.6 до 0.9) проявляется баланс между логичностью и креативностью ответов, в большинстве случаев именно эти значения будут хорошо работать в диалогах. При высоких значениях (от 1.0 до 2.0) ответы становятся нестандартными, хаотичными, модель перестает следовать заданной инструкции.",
                topPTitle: "Top P",
                topPText: "Регулирует порог вероятности для выбора следующего токена, определяет, сколько вариантов модель будет учитывать при генерации. Модель сортирует все возможные токены по убыванию вероятности, затем через параметр Top P задаётся кумулятивная вероятность. Например, если значение Top P = 0.9, тогда модель будет брать токены, суммарная вероятность которых составляет 90%, а остальные 10% отбрасываются. Чем меньше значение, тем более однообразные сообщения получаются при генерации.",
                repeatPenaltyTitle: "Repeat Penalty",
                repeatPenaltyText: "Отвечает за степень подавления повторяющихся слов или фраз. Если значение > 1.0, вероятность повторения уже использованных токенов понижается. При значении 1.0 повторы остаются без штрафования. Однако слишком высокие значения могут сделать текст неестественным, так как даже повторяющиеся местоимения будут отбрасываться при генерации. Рекомендую ставить значения от 1.3 до 1.5, чтобы ответы не повторялись.",
                maxTokensTitle: "Max Tokens",
                maxTokensText: "Регулирует максимальную длину генерируемого ответа (в токенах). Как мы знаем, токен - это минимальная единица текста (слово, часть слова, знак препинания). Модель останавливает генерацию текста, как только достигает лимита заданного в настройках, даже если ответ не был логически завершён.",
                importantTitle: "Важно!",
                importantText: "Разные модели могут требовать разные значения температуры и Top P, поэтому сидеть на одних настройках долго не получится. Эти два параметра взаимосвязаны - при высокой температуре, но низком Top P, модель может вести себя нестандартно и не следовать системному промпту. Будьте аккуратны.",
                nextPageText: "На следующей странице вы сможете ознакомиться с разными Text-to-Speech системами, которые поддерживает Soul of Waifu с примерами.",
                paginationPrev: "Создание персонажей",
                paginationNext: "Озвучка",
                copyrightText: "© 2025 Soul of Waifu. Разработал jofizcd."
            },
            en: {
                pageTitle: "LLM Setup - Soul of Waifu Documentation",
                githubTitle: "GitHub",
                discordTitle: "Discord",
                sidebarTitle: "Table of Contents",
                sidebarIntroduction: "Introduction",
                sidebarInstallation: "Installation",
                sidebarQuickStart: "Quick Start",
                sidebarCharacterCreation: "Character Creation",
                sidebarLlmSetup: "LLM Setup",
                sidebarTtsStt: "Text-to-Speech",
                sidebarAvatars: "Character Avatars",
                sidebarCourseTitle: "Introduction to AI RP",
                sidebarCourseLlm: "All About LLMs",
                sidebarCoursePersona: "Persona",
                sidebarCourseSystemPrompt: "System Prompt",
                sidebarCourseLorebooks: "Lorebooks",
                sidebarCourseSmartMemory: "Smart Memory",
                sidebarCourseSoulSystem: "Soul of Waifu System",
                sidebarDevelopmentTitle: "Program Support",
                sidebarCommunity: "Community",
                sidebarSupport: "Support the Author",
                docTitle: "LLM Setup",
                docIntro: "In this section, we will look at all the parameters that can be changed in language models to influence on text generation. To change the language model settings, go to settings and select \"LLM Settings\". You will go to the language model settings. The upper part contains settings for local language models, and the lower part - for all language models, both cloud and local.",
                tocTitle: "Section Contents",
                tocLocalModelsSettings: "Local Models Settings",
                tocDeviceSelection: "Device Selection",
                tocGpuLayers: "GPU Layers",
                tocContextSize: "Context Size",
                tocMlock: "MLock",
                tocFlashAttention: "Flash Attention",
                tocGeneralSettings: "General Settings",
                tocTemperature: "Temperature",
                tocTopP: "Top P",
                tocRepeatPenalty: "Repeat Penalty",
                tocMaxTokens: "Max Tokens",
                gpuSettingsScreenshotAlt: "Language model settings for graphics cards",
                gpuSettingsCaption: "Language model settings for graphics cards",
                externalUsageText: "If you want to use a local language model in other applications or games, run your local language model through the Models Hub and copy the address that the game can access to generate text. For example, in the My Robot game, in order to communicate with the robot, you need to connect a language model. Thanks to Soul of Waifu, you can connect a model running in the program to the game, and thus the robot will be able to communicate with you.",
                programSetupScreenshotAlt: "Model setup in the program",
                programSetupCaption: "Model setup in the program",
                robotGameScreenshotAlt: "Robot in My Robot game",
                robotGameCaption: "Robot in My Robot game",
                deviceSelectionTitle: "Device Selection",
                deviceSelectionText: "The next setting is responsible for selecting the device on which text generation will take place - processor or graphics card. On the processor, token generation will be much slower than on the graphics card, but you will be able to run local language models even on old systems, albeit with speed limitations.",
                backendSelectionText: "If you selected a graphics card, the next step will be to select the backend. It's quite simple here - if you have an NVIDIA graphics card, select CUDA, and if something else, select Vulkan. With CUDA cores support, the text generation speed is somewhat higher than when using Vulkan, but the main thing is that any graphics cards will be supported.",
                gpuLayersTitle: "GPU Layers",
                gpuLayersText: "This is the number of model layers that will be processed on the GPU. The range is from 0 to the maximum number of layers. If the model has only 35 layers, then even if you enter 1000, all model layers will be loaded into the graphics card, that is, 35. By default, 20 layers of the local language model will be processed by the graphics card, which provides a balance between speed and output quality. The more layers on the GPU, the higher the token generation speed, but this requires more video memory.",
                contextSizeTitle: "Context Size",
                contextSizeText: "This is the maximum context length (number of tokens) allocated to the model for processing information. It includes all the information from the character card, system prompt, lorebook, author's notes and chat history (all messages in the chat). Note that the model takes into account exactly as many tokens as specified in the Context Size parameter for one request, and this value is applied when the model is launched. Changes in the setting do not take effect until the model is restarted. If some information about the character or chat goes beyond the context window, the model forgets it and can no longer operate with it.",
                mlockTitle: "MLock",
                mlockText: "This setting is responsible for forcibly fixing the language model in RAM, which prevents the model from being unloaded from the cache, speeding up subsequent requests to it. But you should only turn it on if you have a lot of free RAM.",
                flashAttentionTitle: "Flash Attention",
                flashAttentionText: "Responsible for optimizing the attention mechanism, accelerating calculations. It reduces the time for generating responses from the character by more efficiently distributing your computer's computing resources. If you have an NVIDIA graphics card, be sure to turn it on. You can learn more about this technology in the \"Introduction to AI RP\".",
                generalSettingsTitle: "General Language Model Settings",
                generalSettingsText: "Now let's move on to the general settings of language models, both cloud and local.",
                temperatureTitle: "Temperature",
                temperatureText: "Responsible for the level of randomness and predictability of the generated text. When generating the next token, the model calculates probabilities for all possible options. With a low temperature (from 0.1 to 0.5), the model selects the most probable options, the answers become deterministic, technically accurate. With medium values (from 0.6 to 0.9), a balance between logic and creativity of responses is manifested, in most cases these values will work well in dialogues. With high values (from 1.0 to 2.0), the answers become non-standard, chaotic, the model stops following the given instruction.",
                topPTitle: "Top P",
                topPText: "Regulates the probability threshold for selecting the next token, determines how many options the model will take into account when generating. The model sorts all possible tokens in descending order of probability, then the cumulative probability is set through the Top P parameter. For example, if the Top P value = 0.9, then the model will take tokens whose total probability is 90%, and the remaining 10% will be discarded. The lower the value, the more uniform the messages generated.",
                repeatPenaltyTitle: "Repeat Penalty",
                repeatPenaltyText: "Responsible for the degree of suppression of repeating words or phrases. If the value > 1.0, the probability of repeating already used tokens is reduced. With a value of 1.0, repetitions remain without penalty. However, too high values can make the text unnatural, since even repeating pronouns will be discarded during generation. I recommend setting values from 1.3 to 1.5 so that the answers do not repeat.",
                maxTokensTitle: "Max Tokens",
                maxTokensText: "Regulates the maximum length of the generated response (in tokens). As we know, a token is the minimum unit of text (word, part of a word, punctuation mark). The model stops generating text as soon as it reaches the limit set in the settings, even if the answer was not logically completed.",
                importantTitle: "Important!",
                importantText: "Different models may require different temperature and Top P values, so it's not possible to sit on the same settings for a long time. These two parameters are interrelated - with a high temperature, but a low Top P, the model may behave in a non-standard way and not follow the system prompt. Be careful.",
                nextPageText: "On the next page, you can get acquainted with different Text-to-Speech systems supported by Soul of Waifu with examples.",
                paginationPrev: "Character Creation",
                paginationNext: "Text-to-Speech",
                copyrightText: "© 2025 Soul of Waifu. Developed by jofizcd."
            }
        };
        function saveSettings(settings) {
            try {
                localStorage.setItem('soulofwaifu_settings', JSON.stringify(settings));
            } catch (e) {
                console.warn("Не удалось сохранить настройки в localStorage:", e);
            }
        }
        function loadSettings() {
            try {
                const settingsStr = localStorage.getItem('soulofwaifu_settings');
                if (settingsStr) {
                    return JSON.parse(settingsStr);
                }
            } catch (e) {
                console.warn("Не удалось загрузить настройки из localStorage:", e);
            }
            return { theme: 'dark', language: 'ru' };
        }
        function applySettings(settings) {
            if (settings.theme === 'light') {
                document.body.classList.add('light-theme');
                const logoDark = document.querySelector('.logo-dark');
                const logoLight = document.querySelector('.logo-light');
                if (logoDark) logoDark.style.display = 'none';
                if (logoLight) logoLight.style.display = 'block';
            } else {
                document.body.classList.remove('light-theme');
                const logoDark = document.querySelector('.logo-dark');
                const logoLight = document.querySelector('.logo-light');
                if (logoDark) logoDark.style.display = 'block';
                if (logoLight) logoLight.style.display = 'none';
            }
            updateLanguage(settings.language);
            if (document.getElementById('languageSelector')) {
                document.getElementById('languageSelector').value = settings.language;
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    document.body.classList.toggle('light-theme');
                    const logoDark = document.querySelector('.logo-dark');
                    const logoLight = document.querySelector('.logo-light');
                    if (document.body.classList.contains('light-theme')) {
                        if (logoDark) logoDark.style.display = 'none';
                        if (logoLight) logoLight.style.display = 'block';
                    } else {
                        if (logoDark) logoDark.style.display = 'block';
                        if (logoLight) logoLight.style.display = 'none';
                    }
                    const currentLang = document.getElementById('languageSelector') ? document.getElementById('languageSelector').value : 'ru';
                    const currentTheme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                    saveSettings({ theme: currentTheme, language: currentLang });
                });
            }
            const languageSelector = document.getElementById('languageSelector');
            if (languageSelector) {
                languageSelector.addEventListener('change', function() {
                    const selectedLang = this.value;
                    updateLanguage(selectedLang);
                    const currentTheme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                    saveSettings({ theme: currentTheme, language: selectedLang });
                });
            }
            const savedSettings = loadSettings();
            applySettings(savedSettings);
            const currentPagePath = window.location.pathname; 
            const sidebarLinks = document.querySelectorAll('.doc-sidebar a');
            sidebarLinks.forEach(link => {
                try {
                    const linkPath = new URL(link.href, window.location.origin).pathname;
                    link.classList.remove('active');
                    if (currentPagePath === linkPath || 
                        currentPagePath === linkPath.replace('/index.html', '/') ||
                        (currentPagePath.endsWith('/') && linkPath.endsWith('/index.html')) ||
                        (currentPagePath === '/' && linkPath.includes('overview.html'))) {
                        link.classList.add('active');
                    }
                } catch (e) {
                    if (link.getAttribute('href').startsWith('#')) {
                        const currentHash = window.location.hash;
                        if (link.getAttribute('href') === currentHash) {
                            link.classList.add('active');
                        }
                    }
                }
            });
        });
        function updateLanguage(lang) {
            const t = translations[lang];
            if (!t) return;
            document.querySelectorAll('[data-translate-key]').forEach(element => {
                const key = element.getAttribute('data-translate-key');
                if (t[key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = t[key];
                    } else {
                        element.textContent = t[key];
                    }
                }
            });
            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (t[key]) {
                    element.placeholder = t[key];
                }
            });
            document.querySelectorAll('[data-translate-title]').forEach(element => {
                const key = element.getAttribute('data-translate-title');
                if (t[key]) {
                    element.title = t[key];
                }
            });
            document.querySelectorAll('[data-translate-alt]').forEach(element => {
                const key = element.getAttribute('data-translate-alt');
                if (t[key]) {
                    element.alt = t[key];
                }
            });
            const prevLink = document.querySelector('.pagination-prev');
            if (prevLink) {
                prevLink.innerHTML = `<i class="fas fa-arrow-left"></i> ${t.paginationPrev || 'Installation'}`;
            }
            const nextLink = document.querySelector('.pagination-next');
            if (nextLink) {
                nextLink.innerHTML = `${t.paginationNext || 'Character Creation'} <i class="fas fa-arrow-right"></i>`;
            }
            document.title = t.pageTitle || "LLM Setup - Soul of Waifu Documentation";
        }
    </script>
</body>
</html>
