<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="pageTitle">Text-to-Speech - Documentation Soul of Waifu</title>
    <link rel="icon" type="image/x-icon" href="../../assets/icons/logotype.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        :root {
            /* Dark Theme Colors */
            --dark-primary: #4361ee;
            --dark-primary-dark: #3a56d4;
            --dark-primary-light: #4868ff;
            --dark-secondary: #7209b7;
            --dark-accent: #4cc9f0;
            --dark-dark: #0f172a;
            --dark-darker: #0c1221;
            --dark-darkest: #080c16;
            --dark-light: #f1f5f9;
            --dark-gray: #94a3b8;
            --dark-card-bg: rgba(30, 41, 59, 0.7);
            --dark-card-border: rgba(71, 85, 105, 0.5);
            --dark-section-bg: rgba(15, 23, 42, 0.6);
            --dark-code-bg: #1e293b;
            --dark-hover: rgba(67, 97, 238, 0.15);

            /* Light Theme Colors */
            --light-primary: #4361ee;
            --light-primary-dark: #3a56d4;
            --light-primary-light: #4868ff;
            --light-secondary: #7209b7;
            --light-accent: #4cc9f0;
            --light-dark: #0f172a;
            --light-darker: #0c1221;
            --light-darkest: #080c16;
            --light-light: #f8fafc;
            --light-gray: #64748b;
            --light-card-bg: rgba(255, 255, 255, 0.9);
            --light-card-border: rgba(203, 213, 225, 0.8);
            --light-section-bg: rgba(241, 245, 249, 0.8);
            --light-code-bg: #f1f5f9;
            --light-hover: rgba(67, 97, 238, 0.1);

            /* Current Theme */
            --primary: var(--dark-primary);
            --primary-dark: var(--dark-primary-dark);
            --primary-light: var(--dark-primary-light);
            --secondary: var(--dark-secondary);
            --accent: var(--dark-accent);
            --dark: var(--dark-dark);
            --darker: var(--dark-darker);
            --darkest: var(--dark-darkest);
            --light: var(--dark-light);
            --gray: var(--dark-gray);
            --card-bg: var(--dark-card-bg);
            --card-border: var(--dark-card-border);
            --section-bg: var(--dark-section-bg);
            --code-bg: var(--dark-code-bg);
            --hover: var(--dark-hover);
        }
        body {
            background: linear-gradient(135deg, var(--darker), var(--darkest));
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        body.light-theme {
            --primary: var(--light-primary);
            --primary-dark: var(--light-primary-dark);
            --primary-light: var(--light-primary-light);
            --secondary: var(--light-secondary);
            --accent: var(--light-accent);
            --dark: var(--light-dark);
            --darker: var(--light-darker);
            --darkest: var(--light-darkest);
            --light: var(--light-dark);
            --gray: var(--light-gray);
            --card-bg: var(--light-card-bg);
            --card-border: var(--light-card-border);
            --section-bg: var(--light-section-bg);
            --code-bg: var(--light-code-bg);
            --hover: var(--light-hover);
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            color: var(--dark);
        }
        header {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--card-border);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        body.light-theme header {
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid var(--card-border);
        }
        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-bottom: 10px;
        }
        .logo-icon {
            width: 40px;
            height: 40px;
            position: relative;
        }
        .logo a {
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            text-decoration: none;
        }
        body.light-theme .logo-text {
            color: var(--dark);
        }
        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .social-icons {
            display: flex;
            gap: 0.5rem;
        }
        .social-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid var(--card-border);
        }
        body.light-theme .social-icon {
            background: rgba(255, 255, 255, 0.8);
            color: var(--dark);
        }
        .social-icon:hover {
            background: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .theme-language-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        .theme-toggle {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            width: 50px;
            height: 25px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .theme-toggle-slider {
            position: absolute;
            top: 1px;
            left: 1px;
            width: 21px;
            height: 21px;
            background: var(--primary-light);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        body.light-theme .theme-toggle-slider {
            transform: translateX(25px);
        }
        .language-selector {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 0.3rem 0.8rem;
            color: var(--light);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        body.light-theme .language-selector {
            color: var(--dark);
        }
        .doc-container {
            display: flex;
            min-height: 100vh;
            padding-top: 78px;
        }
        .doc-sidebar {
            width: 280px;
            background: var(--card-bg);
            border-right: 1px solid var(--card-border);
            padding: 2rem 1rem;
            position: fixed;
            height: calc(100vh - 76px);
            overflow-y: auto;
            transition: all 0.3s ease;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-light) var(--card-bg);
        }
        .doc-sidebar::-webkit-scrollbar {
            width: 8px;
        }
        .doc-sidebar::-webkit-scrollbar-track {
            background: var(--card-bg);
            border-radius: 4px;
        }
        .doc-sidebar::-webkit-scrollbar-thumb {
            background-color: var(--primary-light);
            border-radius: 4px;
            border: 2px solid var(--card-bg);
        }
        .doc-sidebar h3 {
            color: var(--primary-light);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--card-border);
            font-size: 1.1rem;
        }
        .doc-sidebar ul {
            list-style: none;
            margin-bottom: 2rem;
        }
        .doc-sidebar ul li {
            margin-bottom: 0.3rem;
        }
        .doc-sidebar a {
            color: #cbd5e1;
            text-decoration: none;
            display: block;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }
        body.light-theme .doc-sidebar a {
            color: #4a5568;
        }
        .doc-sidebar a:hover {
            background: var(--hover);
            color: var(--primary-light);
        }
        .doc-sidebar a.active {
            background: var(--primary);
            color: white !important;
        }
        body.light-theme .doc-sidebar a.active {
            color: white !important;
        }
        .doc-main {
            flex: 1;
            margin-left: 280px;
            padding: 2rem;
        }
        .doc-content {
            max-width: 900px;
            margin: 0 auto;
        }
        .doc-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: white;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--card-border);
            scroll-margin-top: 100px;
        }
        body.light-theme .doc-content h1 {
            color: var(--dark);
        }
        .doc-content h2 {
            font-size: 2rem;
            margin: 2rem 0 1rem;
            color: white;
            scroll-margin-top: 100px;
            position: relative;
            padding-left: 1.5rem;
        }
        body.light-theme .doc-content h2 {
            color: var(--dark);
        }
        .doc-content h2:before {
            content: "";
            position: absolute;
            left: 0;
            top: 0.5rem;
            width: 4px;
            height: 1.5rem;
            background: var(--primary-light);
            border-radius: 2px;
        }
        .doc-content h3 {
            font-size: 1.5rem;
            margin: 1.5rem 0 1rem;
            color: white;
            scroll-margin-top: 100px;
        }
        body.light-theme .doc-content h3 {
            color: var(--dark);
        }
        .doc-content p {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
            color: #cbd5e1;
        }
        body.light-theme .doc-content p {
            color: #4a5568;
        }
        .doc-content ul, 
        .doc-content ol {
            margin: 1rem 0 1.5rem 2rem;
        }
        .doc-content li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
            color: #cbd5e1;
        }
        body.light-theme .doc-content li {
            color: #4a5568;
        }
        .doc-content code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: var(--accent);
            font-size: 0.95rem;
        }
        .doc-content pre {
            background: var(--code-bg);
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--card-border);
            position: relative;
        }
        body.light-theme .doc-content pre {
            background: #f1f5f9;
        }
        .doc-content pre code {
            background: none;
            padding: 0;
            color: #cbd5e1;
        }
        body.light-theme .doc-content pre code {
            color: #4a5568;
        }
        .doc-content .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--primary-light);
            background: rgba(67, 97, 238, 0.1);
            position: relative;
            padding-left: 3rem;
        }
        body.light-theme .doc-content .alert {
            background: rgba(67, 97, 238, 0.05);
        }
        .doc-content .alert:before {
            content: "!";
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
            background: var(--primary-light);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .doc-content .alert-warning {
            border-left-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }
        body.light-theme .doc-content .alert-warning {
            background: rgba(245, 158, 11, 0.05);
        }
        .doc-content .alert-warning:before {
            background: #f59e0b;
        }
        .doc-content .alert-info {
            border-left-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }
        body.light-theme .doc-content .alert-info {
            background: rgba(59, 130, 246, 0.05);
        }
        .doc-content .alert-info:before {
            background: #3b82f6;
        }
        .model-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            overflow: hidden;
        }
        .model-table th,
        .model-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--card-border);
        }
        .model-table th {
            background: rgba(67, 97, 238, 0.15);
            color: var(--primary-light);
            font-weight: 600;
        }
        .model-table tr:last-child td {
            border-bottom: none;
        }
        body.light-theme .model-table th {
            background: rgba(67, 97, 238, 0.1);
        }
        .screenshot-container {
            text-align: center;
            margin: 1.5rem 0;
        }
        .screenshot-container img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            border: 1px solid var(--card-border);
        }
        .toc {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 10px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .toc h3 {
            color: var(--primary-light);
            margin-bottom: 1rem;
            margin-top: 0.5rem;
        }
        .toc ul {
            list-style: none;
            margin: 0;
        }
        .toc ul li {
            margin-bottom: 0.5rem;
        }
        .toc ul li a {
            color: var(--primary-light);
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        .toc ul li a:before {
            content: "→";
            margin-right: 0.5rem;
        }
        .pagination {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--card-border);
        }
        .pagination-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-light);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
        }
        .pagination-link:hover {
            background: var(--hover);
        }
        .pagination-next {
            margin-left: auto;
        }
        @media (max-width: 1200px) {
            .doc-sidebar {
                width: 240px;
            }
            .doc-main {
                margin-left: 240px;
            }
        }
        @media (max-width: 992px) {
            .doc-container {
                flex-direction: column;
            }
            .doc-sidebar {
                width: 100%;
                position: relative;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--card-border);
            }
            .doc-main {
                margin-left: 0;
            }
        }
        @media (max-width: 768px) {
            header {
                padding: 1rem;
            }
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            .logo {
                align-self: flex-start;
            }
            .header-controls {
                width: 100%;
                flex-wrap: wrap;
            }
            .social-icons {
                margin-left: auto;
            }
            .theme-language-controls {
                margin-left: auto;
            }
            .doc-content h1 {
                font-size: 2rem;
            }
            .doc-content h2 {
                font-size: 1.7rem;
            }
            .doc-content h3 {
                font-size: 1.4rem;
            }
        }
        @media (max-width: 480px) {
            .social-icon span {
                display: none;
            }
            .social-icon {
                width: 32px;
                height: 32px;
            }
            .doc-content h1 {
                font-size: 1.8rem;
            }
            .doc-content h2 {
                font-size: 1.5rem;
            }
            .doc-content h3 {
                font-size: 1.3rem;
            }
            .doc-content p {
                font-size: 1rem;
            }
        }
        footer {
            background: var(--darkest);
            padding: 1rem;
            border-top: 1px solid var(--card-border);
            text-align: center;
        }
        body.light-theme footer {
            background: #f8fafc;
            border-top: 1px solid var(--card-border);
        }
        .footer-content {
            margin: auto;
            text-align: right;
            color: #94a3b8;
        }
        body.light-theme .footer-content {
            color: #718096;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .doc-content > * {
            animation: fadeIn 0.5s ease-out;
        }
        .audio-player {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        .audio-player audio {
            width: 100%;
            margin-top: 0.5rem;
        }
        .audio-player label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--primary-light);
            font-weight: 500;
        }
        .screenshots-row {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .screenshots-row .screenshot-container {
            flex: 1;
            margin: 0;
        }
        @media (max-width: 768px) {
            .screenshots-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="../../index.html">
                    <div class="logo-icon">
                        <img src="../../assets/icons/logotitle.png" alt="logotype" width="160px" height="50px" class="logo-dark">
                        <img src="../../assets/icons/logotitle_black.png" alt="logotype" width="160px" height="50px" class="logo-light" style="display: none;">
                    </div>
                </a>
            </div>
            <div class="header-controls">
                <div class="social-icons">
                    <a href="https://github.com/jofizcd/Soul-of-Waifu" class="social-icon" title="GitHub" data-translate-title="githubTitle">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="https://discord.com/invite/6vFtQGVfxM" class="social-icon" title="Discord" data-translate-title="discordTitle">
                        <i class="fab fa-discord"></i>
                    </a>
                    <a href="https://www.donationalerts.com/r/jofizcd" class="social-icon" title="Donation Alerts">
                        <i class="fa-solid fa-hand-holding-dollar"></i>
                    </a>
                </div>
                <div class="theme-language-controls">
                    <div class="theme-toggle" id="themeToggle">
                        <div class="theme-toggle-slider"></div>
                    </div>
                    <select class="language-selector" id="languageSelector">
                        <option value="ru">RU</option>
                        <option value="en">EN</option>
                    </select>
                </div>
            </div>
        </div>
    </header>
    <div class="doc-container">
        <aside class="doc-sidebar">
            <h3 class="sidebar-title" data-translate-key="sidebarTitle">Содержание</h3>
            <ul>
                <li><a href="../overview/overview.html" class="sidebar-introduction" data-translate-key="sidebarIntroduction">Введение</a></li>
                <li><a href="../installation/installation.html" class="sidebar-installation" data-translate-key="sidebarInstallation">Установка</a></li>
                <li><a href="../quick-start/quickstart.html" class="sidebar-quick-start" data-translate-key="sidebarQuickStart">Быстрый старт</a></li>
                <li><a href="../character-creation/character-creation.html" class="sidebar-character-creation" data-translate-key="sidebarCharacterCreation">Создание персонажей</a></li>
                <li><a href="../llm-setup/llm-setup.html" class="sidebar-llm-setup" data-translate-key="sidebarLlmSetup">Настройка моделей</a></li>
                <li><a href="tts.html" class="sidebar-tts-stt active" data-translate-key="sidebarTtsStt">Озвучка</a></li>
                <li><a href="../avatars/avatars.html" class="sidebar-avatars" data-translate-key="sidebarAvatars">Аватары персонажей</a></li>
            </ul>
            <h3 class="sidebar-course-title" data-translate-key="sidebarCourseTitle">Вводный курс в AI RP</h3>
            <ul>
                <li><a href="../course/about-llm/llm.html" class="sidebar-course-llm" data-translate-key="sidebarCourseLlm">Всё про LLM</a></li>
                <li><a href="../course/persona/persona.html" class="sidebar-course-persona" data-translate-key="sidebarCoursePersona">Персона</a></li>
                <li><a href="../course/system-prompt/system-prompt.html" class="sidebar-course-system-prompt" data-translate-key="sidebarCourseSystemPrompt">Системный промпт</a></li>
                <li><a href="../course/lorebooks/lorebooks.html" class="sidebar-course-lorebooks" data-translate-key="sidebarCourseLorebooks">Лорбуки</a></li>
                <li><a href="../course/smart-memory/smart-memory.html" class="sidebar-course-smartmemory" data-translate-key="sidebarCourseSmartMemory">Умная Память</a></li>
                <li><a href="../course/sow-system/sow-system.html" class="sidebar-course-soul-system" data-translate-key="sidebarCourseSoulSystem">Soul of Waifu System</a></li>
            </ul>
            <h3 class="sidebar-development-title" data-translate-key="sidebarDevelopmentTitle">Развитие программы</h3>
            <ul>
                <li><a href="../program-support/community/community.html" class="sidebar-community" data-translate-key="sidebarCommunity">Сообщество</a></li>
                <li><a href="../program-support/support/support.html" class="sidebar-support" data-translate-key="sidebarSupport">Поддержать автора</a></li>
            </ul>
        </aside>
        <main class="doc-main">
            <div class="doc-content">
                <h1 id="tts" class="doc-title" data-translate-key="docTitle">Озвучка</h1>
                <p class="doc-intro" data-translate-key="docIntro">В этом разделе мы рассмотрим все поддерживающиеся в Soul of Waifu движки Text-to-Speech.</p>
                
                <div class="toc">
                    <h3 data-translate-key="tocTitle">Содержание раздела</h3>
                    <ul>
                        <li><a href="#character-ai" data-translate-key="tocCharacterAi">Character AI</a></li>
                        <li><a href="#elevenlabs" data-translate-key="tocElevenlabs">ElevenLabs</a></li>
                        <li><a href="#edge-tts" data-translate-key="tocEdgeTts">Edge TTS</a></li>
                        <li><a href="#rvc" data-translate-key="tocRvc">RVC-обработка</a></li>
                        <li><a href="#xttsv2" data-translate-key="tocXttsv2">XTTSv2</a></li>
                        <li><a href="#kokoro" data-translate-key="tocKokoro">Kokoro 82M</a></li>
                    </ul>
                </div>
                
                <h2 id="character-ai" data-translate-key="characterAiTitle">Character AI</h2>
                
                <p data-translate-key="characterAiText">Вариант с Character AI работает только если персонаж добавлен с сайта Character AI, а вы подключили API-токен к программе. Для начала нажмите на кнопку выбора TTS, находящуюся на карточке персонажа, чтобы перейти к выбору нужного варианта. В открывшемся окне, выберите Character AI, в поисковой строке введите название голоса и нажмите на поиск. В выпадающем списке выберите нужный голос и прослушайте его. Если голос вам понравился, тогда нажмите на кнопку выбора озвучки.</p>
                
                <div class="screenshot-container">
                    <img src="../../assets/screenshots/ttspage_1.png" alt="Демонстрация TTS от Character AI" data-translate-alt="characterAiScreenshotAlt">
                    <p class="screenshot-caption" data-translate-key="characterAiCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Демонстрация TTS от Character AI</p>
                </div>
                
                <h2 id="elevenlabs" data-translate-key="elevenlabsTitle">ElevenLabs</h2>
                
                <p data-translate-key="elevenlabsText">Перейдите на сайт ElevenLabs и возьмите оттуда API-токен, который необходимо вставить в соответствующее поле. Также с сайта необходимо скопировать ID голоса, который вы хотите, чтобы звучал у персонажа. Нажимайте на кнопку сохранения и наслаждайтесь прекрасной озвучкой от ElevenLabs, лимит которой закончится у вас уже через 10 сообщений.</p>
                
                <div class="screenshot-container">
                    <img src="../../assets/screenshots/ttspage_3.png" alt="Демонстрация TTS от ElevenLabs" data-translate-alt="elevenlabsScreenshotAlt">
                    <p class="screenshot-caption" data-translate-key="elevenlabsCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Демонстрация TTS от ElevenLabs</p>
                </div>
                
                <h2 id="edge-tts" data-translate-key="edgeTtsTitle">Edge TTS</h2>
                
                <p data-translate-key="edgeTtsText">Всё что вам тут нужно - это выбрать язык, на котором будет происходить озвучка, и голос. При необходимости можете использовать RVC-обработку.</p>
                
                <div class="audio-player">
                    <label data-translate-key="edgeTtsAudioLabel">Пример аудиофайла для Edge TTS:</label>
                    <audio controls>
                        <source src="../../assets/sounds/edge_tts.mp3" type="audio/mpeg">
                        Ваш браузер не поддерживает аудио элемент.
                    </audio>
                </div>
                
                <div class="screenshot-container">
                    <img src="../../assets/screenshots/ttspage_4.png" alt="Демонстрация TTS от Edge TTS" data-translate-alt="edgeTtsScreenshotAlt">
                    <p class="screenshot-caption" data-translate-key="edgeTtsCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Демонстрация TTS от Edge TTS</p>
                </div>
                
                <h2 id="rvc" data-translate-key="rvcTitle">RVC-обработка</h2>
                
                <p data-translate-key="rvcText1">RVC (Retrieval-Based Voice Conversion) - это технология преобразования голоса, которая позволяет менять тембр и интонации сгенерированной движком TTS озвучки под конкретный голос (например, персонажа из аниме, знаменитости или кастомного персонажа). В отличие от стандартных TTS, где голос «вшит» в модель, RVC добавляет возможность выбирать: сначала генерируется речь через TTS, затем её тембр корректируется с помощью RVC и на выходе мы получаем нужный нам голос, который точно подойдёт вашему персонажу.</p>
                
                <p data-translate-key="rvcText2">Как работает? Процесс состоит из двух этапов: 1. Текст преобразуется в аудио при помощи Text-to-Speech движка. На этом этапе задаются базовые параметры: язык, скорость и эмоции. 2. Полученный аудиофайл подаётся на вход RVC-модели, которую вы ранее скачали и поместили в соответствующую папку. RVC сохраняет текст и интонацию, но заменяет тембр на необходимый нам.</p>
                
                <p data-translate-key="rvcText3">Это особенно полезно, ведь по своей природе TTS-движки ограничены голосами, на которых они были обучены, а благодаря технологии RVC можно динамически менять голос на тот, который подходит персонажу.</p>
                
                <h3 data-translate-key="rvcWhereToGetTitle">Где взять модель RVC?</h3>
                
                <p data-translate-key="rvcWhereToGetText">Взять модель RVC можно на Discord-сервере AI Hub или на сайте Weights.</p>
                
                <div class="screenshots-row">
                    <div class="screenshot-container">
                        <img src="../../assets/screenshots/ttspage_7.png" alt="Discord-сервер AI Hub" data-translate-alt="rvcDiscordScreenshotAlt">
                        <p class="screenshot-caption" data-translate-key="rvcDiscordCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Discord-сервер AI Hub</p>
                    </div>
                    <div class="screenshot-container">
                        <img src="../../assets/screenshots/ttspage_2.png" alt="Сайт Weights" data-translate-alt="rvcWeightsScreenshotAlt">
                        <p class="screenshot-caption" data-translate-key="rvcWeightsCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Сайт Weights</p>
                    </div>
                </div>

                <h3 data-translate-key="rvcWhereToPutTitle">Куда поместить модель RVC?</h3>

                <p data-translate-key="rvcWhereToPutText">RVC-модель с расширением .pth вместе с файлом .index вы должны поместить в одну папку и эту папку потом поместить по директории Soul-of-Waifu/assets/rvc_models. Название папки должно в точности совпадать с названием самой модели, иначе ничего не будет работать.</p>

                <div class="screenshot-container">
                    <img src="../../assets/screenshots/ttspage_8.png" alt="Discord-сервер AI Hub" data-translate-alt="rvcDiscordScreenshotAlt">
                </div>
                
                <h2 id="xttsv2" data-translate-key="xttsv2Title">XTTSv2</h2>
                
                <p data-translate-key="xttsv2Text1">Далее идут локальные TTS модели, которые используют мощности вашего компьютера. Начнём с XTTSv2 (eXtended Text-to-Speech версии 2) - это открытая нейросетевая модель от проекта Coqui-TTS, разработанная для генерации речи с поддержкой мультиязычности и голосового клонирования. Поддерживаются английский, испанский, французский, немецкий, итальянский, португальский, польский, русский, японский, китайский, турецкий, арабский, нидерландский языки. Одна модель может обрабатывать ВСЕ эти языки, не нужно переключаться на другую. Soul of Waifu имеет три встроенных голоса - Мужской, Женский и Спокойный Женский. Вы можете на их место поставить свой отрывок голоса того, кого вы хотите клонировать, но имена файлов должны совпадать с теми, которые стоят по умолчанию. XTTSv2 использует архитектуру VITS (Variational Inference with adversarial learning for end-to-end Text-to-Speech), которая генерирует плавные переходы между словами, имитирует естественные паузы и акценты, а также подстраивает тон под эмоции. Выбрать эту озвучку вы можете также в специальном окне выбора TTS. Но перед использованием вам придется её скачать. Во время чата при первой генерации в консоли вам напишут, что перед скачиванием модели необходимо принять лицензионное соглашение, напишите в консоли "y" и ожидайте загрузки модели. В случае с XTTSv2 вы также можете выбрать RVC-модель для дальнейшей обработки.</p>
                
                <div class="audio-player">
                    <label data-translate-key="xttsv2AudioLabel">Пример аудиофайла для XTTSv2:</label>
                    <audio controls>
                        <source src="../../assets/sounds/xttsv2_tts.wav" type="audio/mpeg">
                        Ваш браузер не поддерживает аудио элемент.
                    </audio>
                </div>
                
                <div class="screenshot-container">
                    <img src="../../assets/screenshots/ttspage_5.png" alt="Демонстрация TTS от XTTSv2" data-translate-alt="xttsv2ScreenshotAlt">
                    <p class="screenshot-caption" data-translate-key="xttsv2Caption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Демонстрация TTS от XTTSv2</p>
                </div>
                
                <h2 id="kokoro" data-translate-key="kokoroTitle">Kokoro 82M</h2>
                
                <p data-translate-key="kokoroText">Эта озвучка получила хвалебные отзывы от людей за счёт маленького веса модели, качества и скорости генерации. Это действительно серьезный прорыв, ведь теперь можно слушать шикарную озвучку даже на слабых компьютерах с высокой скоростью генерации. Kokoro 82M построена на основе комбинации StyleTTS 2 и ISTFTNet архитектур. Но перед использованием этой модели, вам также необходимо будет дождаться её загрузки, это происходит автоматически. Наблюдать за прогрессом загрузки можно в консоли. Soul of Waifu поддерживает голоса на английском, японском и китайском языках. Идеально поддаётся RVC-обработке, главное поставить нужный голос от Kokoro.</p>
                
                <div class="audio-player">
                    <label data-translate-key="kokoroAudioLabel">Пример аудиофайла для Kokoro 82M:</label>
                    <audio controls>
                        <source src="../../assets/sounds/kokoro_tts.wav" type="audio/mpeg">
                        Ваш браузер не поддерживает аудио элемент.
                    </audio>
                </div>
                
                <div class="screenshot-container">
                    <img src="../../assets/screenshots/ttspage_6.png" alt="Демонстрация TTS от Kokoro" data-translate-alt="kokoroScreenshotAlt">
                    <p class="screenshot-caption" data-translate-key="kokoroCaption" style="margin-top: 12px; font-size: 0.95em; color: #666;">Демонстрация TTS от Kokoro 82M</p>
                </div>
                
                <p data-translate-key="nextPageText">В следующем разделе мы рассмотрим возможность установки персонажу аватара, который будет располагаться справа от чата.</p>
                
                <div class="pagination">
                    <a href="../llm-setup/llm-setup.html" class="pagination-link pagination-prev">
                        <i class="fas fa-arrow-left"></i> <span class="pagination-prev-text" data-translate-key="paginationPrev">Настройка моделей</span>
                    </a>
                    <a href="../avatars/avatars.html" class="pagination-link pagination-next">
                        <span class="pagination-next-text" data-translate-key="paginationNext">Аватары персонажей</span> <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </main>
    </div>
    <footer>
        <div class="footer-content">
            <p class="copyright-text" data-translate-key="copyrightText">&copy; 2025 Soul of Waifu. Разработал jofizcd.</p>
        </div>
    </footer>
    <script>
        const translations = {
            ru: {
                pageTitle: "Озвучка - Документация Soul of Waifu",
                githubTitle: "GitHub",
                discordTitle: "Discord",
                sidebarTitle: "Содержание",
                sidebarIntroduction: "Введение",
                sidebarInstallation: "Установка",
                sidebarQuickStart: "Быстрый старт",
                sidebarCharacterCreation: "Создание персонажей",
                sidebarLlmSetup: "Настройка моделей",
                sidebarTtsStt: "Озвучка",
                sidebarAvatars: "Аватары персонажей",
                sidebarCourseTitle: "Вводный курс в AI RP",
                sidebarCourseLlm: "Всё про LLM",
                sidebarCoursePersona: "Персона",
                sidebarCourseSystemPrompt: "Системный промпт",
                sidebarCourseLorebooks: "Лорбуки",
                sidebarCourseSmartMemory: "Умная Память",
                sidebarCourseSoulSystem: "Soul of Waifu System",
                sidebarDevelopmentTitle: "Развитие программы",
                sidebarCommunity: "Сообщество",
                sidebarSupport: "Поддержать автора",
                docTitle: "Озвучка",
                docIntro: "В этом разделе мы рассмотрим все поддерживающиеся в Soul of Waifu движки Text-to-Speech.",
                tocTitle: "Содержание раздела",
                tocCharacterAi: "Character AI",
                tocElevenlabs: "ElevenLabs",
                tocEdgeTts: "Edge TTS",
                tocRvc: "RVC-обработка",
                tocXttsv2: "XTTSv2",
                tocKokoro: "Kokoro 82M",
                characterAiTitle: "Character AI",
                characterAiText: "Вариант с Character AI работает только если персонаж добавлен с сайта Character AI, а вы подключили API-токен к программе. Для начала нажмите на кнопку выбора TTS, находящуюся на карточке персонажа, чтобы перейти к выбору нужного варианта. В открывшемся окне, выберите Character AI, в поисковой строке введите название голоса и нажмите на поиск. В выпадающем списке выберите нужный голос и прослушайте его. Если голос вам понравился, тогда нажмите на кнопку выбора озвучки.",
                characterAiScreenshotAlt: "Демонстрация TTS от Character AI",
                characterAiCaption: "Демонстрация TTS от Character AI",
                elevenlabsTitle: "ElevenLabs",
                elevenlabsText: "Перейдите на сайт ElevenLabs и возьмите оттуда API-токен, который необходимо вставить в соответствующее поле. Также с сайта необходимо скопировать ID голоса, который вы хотите, чтобы звучал у персонажа. Нажимайте на кнопку сохранения и наслаждайтесь прекрасной озвучкой от ElevenLabs, лимит которой закончится у вас уже через 10 сообщений.",
                elevenlabsScreenshotAlt: "Демонстрация TTS от ElevenLabs",
                elevenlabsCaption: "Демонстрация TTS от ElevenLabs",
                edgeTtsTitle: "Edge TTS",
                edgeTtsText: "Всё что вам тут нужно - это выбрать язык, на котором будет происходить озвучка, и голос. При необходимости можете использовать RVC-обработку.",
                edgeTtsAudioLabel: "Пример аудиофайла для Edge TTS:",
                edgeTtsScreenshotAlt: "Демонстрация TTS от Edge TTS",
                edgeTtsCaption: "Демонстрация TTS от Edge TTS",
                rvcTitle: "RVC-обработка",
                rvcText1: "RVC (Retrieval-Based Voice Conversion) - это технология преобразования голоса, которая позволяет менять тембр и интонации сгенерированной движком TTS озвучки под конкретный голос (например, персонажа из аниме, знаменитости или кастомного персонажа). В отличие от стандартных TTS, где голос «вшит» в модель, RVC добавляет возможность выбирать: сначала генерируется речь через TTS, затем её тембр корректируется с помощью RVC и на выходе мы получаем нужный нам голос, который точно подойдёт вашему персонажу.",
                rvcText2: "Как работает? Процесс состоит из двух этапов: 1. Текст преобразуется в аудио при помощи Text-to-Speech движка. На этом этапе задаются базовые параметры: язык, скорость и эмоции. 2. Полученный аудиофайл подаётся на вход RVC-модели, которую вы ранее скачали и поместили в соответствующую папку. RVC сохраняет текст и интонацию, но заменяет тембр на необходимый нам.",
                rvcText3: "Это особенно полезно, ведь по своей природе TTS-движки ограничены голосами, на которых они были обучены, а благодаря технологии RVC можно динамически менять голос на тот, который подходит персонажу.",
                rvcWhereToGetTitle: "Где взять модель RVC?",
                rvcWhereToGetText: "Взять модель RVC можно на Discord-сервере AI Hub или на сайте Weights.",
                rvcWhereToPutTitle: "Куда поместить модель RVC?",
                rvcWhereToPutText: "RVC-модель с расширением .pth вместе с файлом .index вы должны поместить в одну папку и эту папку потом поместить по директории Soul-of-Waifu/assets/rvc_models. Название папки должно в точности совпадать с названием самой модели, иначе ничего не будет работать.",
                rvcDiscordScreenshotAlt: "Discord-сервер AI Hub",
                rvcDiscordCaption: "Discord-сервер AI Hub",
                rvcWeightsScreenshotAlt: "Сайт Weights",
                rvcWeightsCaption: "Сайт Weights",
                xttsv2Title: "XTTSv2",
                xttsv2Text1: "Далее идут локальные TTS модели, которые используют мощности вашего компьютера. Начнём с XTTSv2 (eXtended Text-to-Speech версии 2) - это открытая нейросетевая модель от проекта Coqui-TTS, разработанная для генерации речи с поддержкой мультиязычности и голосового клонирования. Поддерживаются английский, испанский, французский, немецкий, итальянский, португальский, польский, русский, японский, китайский, турецкий, арабский, нидерландский языки. Одна модель может обрабатывать ВСЕ эти языки, не нужно переключаться на другую. Soul of Waifu имеет три встроенных голоса - Мужской, Женский и Спокойный Женский. Вы можете на их место поставить свой отрывок голоса того, кого вы хотите клонировать, но имена файлов должны совпадать с теми, которые стоят по умолчанию. XTTSv2 использует архитектуру VITS (Variational Inference with adversarial learning for end-to-end Text-to-Speech), которая генерирует плавные переходы между словами, имитирует естественные паузы и акценты, а также подстраивает тон под эмоции. Выбрать эту озвучку вы можете также в специальном окне выбора TTS. Но перед использованием вам придется её скачать. Во время чата при первой генерации в консоли вам напишут, что перед скачиванием модели необходимо принять лицензионное соглашение, напишите в консоли \"y\" и ожидайте загрузки модели. В случае с XTTSv2 вы также можете выбрать RVC-модель для дальнейшей обработки.",
                xttsv2AudioLabel: "Пример аудиофайла для XTTSv2:",
                xttsv2ScreenshotAlt: "Демонстрация TTS от XTTSv2",
                xttsv2Caption: "Демонстрация TTS от XTTSv2",
                kokoroTitle: "Kokoro 82M",
                kokoroText: "Эта озвучка получила хвалебные отзывы от людей за счёт маленького веса модели, качества и скорости генерации. Это действительно серьезный прорыв, ведь теперь можно слушать шикарную озвучку даже на слабых компьютерах с высокой скоростью генерации. Kokoro 82M построена на основе комбинации StyleTTS 2 и ISTFTNet архитектур. Но перед использованием этой модели, вам также необходимо будет дождаться её загрузки, это происходит автоматически. Наблюдать за прогрессом загрузки можно в консоли. Soul of Waifu поддерживает голоса на английском, японском и китайском языках. Идеально поддаётся RVC-обработке, главное поставить нужный голос от Kokoro.",
                kokoroAudioLabel: "Пример аудиофайла для Kokoro 82M:",
                kokoroScreenshotAlt: "Демонстрация TTS от Kokoro",
                kokoroCaption: "Демонстрация TTS от Kokoro 82M",
                nextPageText: "В следующем разделе мы рассмотрим возможность установки персонажу аватара, который будет располагаться справа от чата.",
                paginationPrev: "Настройка моделей",
                paginationNext: "Аватары персонажей",
                copyrightText: "© 2025 Soul of Waifu. Разработал jofizcd."
            },
            en: {
                pageTitle: "Text-to-Speech - Soul of Waifu Documentation",
                githubTitle: "GitHub",
                discordTitle: "Discord",
                sidebarTitle: "Table of Contents",
                sidebarIntroduction: "Introduction",
                sidebarInstallation: "Installation",
                sidebarQuickStart: "Quick Start",
                sidebarCharacterCreation: "Character Creation",
                sidebarLlmSetup: "LLM Setup",
                sidebarTtsStt: "Text-to-Speech",
                sidebarAvatars: "Character Avatars",
                sidebarCourseTitle: "Introduction to AI RP",
                sidebarCourseLlm: "All About LLMs",
                sidebarCoursePersona: "Persona",
                sidebarCourseSystemPrompt: "System Prompt",
                sidebarCourseLorebooks: "Lorebooks",
                sidebarCourseSmartMemory: "Smart Memory",
                sidebarCourseSoulSystem: "Soul of Waifu System",
                sidebarDevelopmentTitle: "Program Support",
                sidebarCommunity: "Community",
                sidebarSupport: "Support the Author",
                docTitle: "Text-to-Speech",
                docIntro: "In this section, we will look at all the Text-to-Speech engines supported in Soul of Waifu.",
                tocTitle: "Section Contents",
                tocCharacterAi: "Character AI",
                tocElevenlabs: "ElevenLabs",
                tocEdgeTts: "Edge TTS",
                tocRvc: "RVC Processing",
                tocXttsv2: "XTTSv2",
                tocKokoro: "Kokoro 82M",
                characterAiTitle: "Character AI",
                characterAiText: "The Character AI option only works if the character is added from the Character AI website and you have connected the API token to the program. To begin, click on the TTS selection button located on the character card to go to the selection of the desired option. In the opened window, select Character AI, enter the voice name in the search bar and click search. In the drop-down list, select the desired voice and listen to it. If you like the voice, then click on the voice selection button.",
                characterAiScreenshotAlt: "Demonstration of TTS from Character AI",
                characterAiCaption: "Demonstration of TTS from Character AI",
                elevenlabsTitle: "ElevenLabs",
                elevenlabsText: "Go to the ElevenLabs website and take the API token from there, which must be inserted into the appropriate field. Also from the site you need to copy the voice ID that you want to sound like the character. Click on the save button and enjoy the wonderful ElevenLabs voiceover, the limit of which will end for you after 10 messages.",
                elevenlabsScreenshotAlt: "Demonstration of TTS from ElevenLabs",
                elevenlabsCaption: "Demonstration of TTS from ElevenLabs",
                edgeTtsTitle: "Edge TTS",
                edgeTtsText: "All you need here is to select the language in which the voiceover will take place, and the voice. If necessary, you can use RVC processing.",
                edgeTtsAudioLabel: "Audio file example for Edge TTS:",
                edgeTtsScreenshotAlt: "Demonstration of TTS from Edge TTS",
                edgeTtsCaption: "Demonstration of TTS from Edge TTS",
                rvcTitle: "RVC Processing",
                rvcText1: "RVC (Retrieval-Based Voice Conversion) is a voice conversion technology that allows you to change the timbre and intonations of the generated TTS voiceover to a specific voice (for example, a character from an anime, a celebrity or a custom character). Unlike standard TTS, where the voice is \"sewn\" into the model, RVC adds the ability to choose: first, speech is generated through TTS, then its timbre is corrected using RVC and we get the voice we need, which will definitely suit your character.",
                rvcText2: "How does it work? The process consists of two stages: 1. The text is converted to audio using a Text-to-Speech engine. At this stage, basic parameters are set: language, speed and emotions. 2. The resulting audio file is fed to the input of the RVC model, which you previously downloaded and placed in the appropriate folder. RVC preserves the text and intonation, but replaces the timbre with the one we need.",
                rvcText3: "This is especially useful, because TTS engines are inherently limited to the voices they were trained on, but thanks to RVC technology, you can dynamically change the voice to the one that suits the character.",
                rvcWhereToGetTitle: "Where to get the RVC model?",
                rvcWhereToGetText: "You can get the RVC model on the AI Hub Discord server or on the Weights website.",
                rvcWhereToPutTitle: "Where to put RVC?",
                rvcWhereToPutText: "You must place the RVC model with the .pth extension together with the .index file into a single folder, and then put this folder into the Soul-of-Waifu/assets/rvc_models directory. The folder name must exactly match the model's name, otherwise it will not work.",
                rvcDiscordScreenshotAlt: "AI Hub Discord server",
                rvcDiscordCaption: "AI Hub Discord server",
                rvcWeightsScreenshotAlt: "Weights website",
                rvcWeightsCaption: "Weights website",
                xttsv2Title: "XTTSv2",
                xttsv2Text1: "Next are the local TTS models that use your computer's resources. Let's start with XTTSv2 (eXtended Text-to-Speech version 2) - this is an open neural network model from the Coqui-TTS project, designed to generate speech with multilingual support and voice cloning. English, Spanish, French, German, Italian, Portuguese, Polish, Russian, Japanese, Chinese, Turkish, Arabic, Dutch languages are supported. One model can process ALL these languages, no need to switch to another. Soul of Waifu has three built-in voices - Male, Female and Calm Female. You can replace them with your own voice clip of the person you want to clone, but the file names must match those that are set by default. XTTSv2 uses the VITS (Variational Inference with adversarial learning for end-to-end Text-to-Speech) architecture, which generates smooth transitions between words, imitates natural pauses and accents, and also adjusts the tone to emotions. You can also select this voice in the special TTS selection window. But before using it, you will have to download it. During the chat, at the first generation, the console will tell you that you need to accept the license agreement before downloading the model, write \"y\" in the console and wait for the model to download. In the case of XTTSv2, you can also select an RVC model for further processing.",
                xttsv2AudioLabel: "Audio file example for XTTSv2:",
                xttsv2ScreenshotAlt: "Demonstration of TTS from XTTSv2",
                xttsv2Caption: "Demonstration of TTS from XTTSv2",
                kokoroTitle: "Kokoro 82M",
                kokoroText: "This voiceover received praise from people due to the small model weight, quality and generation speed. This is really a serious breakthrough, because now you can listen to a fabulous voiceover even on weak computers with high generation speed. Kokoro 82M is based on a combination of StyleTTS 2 and ISTFTNet architectures. But before using this model, you will also need to wait for it to download, this happens automatically. You can monitor the download progress in the console. Soul of Waifu supports voices in English, Japanese and Chinese. It is perfectly amenable to RVC processing, the main thing is to put the right voice from Kokoro.",
                kokoroAudioLabel: "Audio file example for Kokoro 82M:",
                kokoroScreenshotAlt: "Demonstration of TTS from Kokoro",
                kokoroCaption: "Demonstration of TTS from Kokoro 82M",
                nextPageText: "In the next section, we will look at the possibility of setting an avatar for a character, which will be located to the right of the chat.",
                paginationPrev: "LLM Setup",
                paginationNext: "Character Avatars",
                copyrightText: "© 2025 Soul of Waifu. Developed by jofizcd."
            }
        };
        function saveSettings(settings) {
            try {
                localStorage.setItem('soulofwaifu_settings', JSON.stringify(settings));
            } catch (e) {
                console.warn("Не удалось сохранить настройки в localStorage:", e);
            }
        }
        function loadSettings() {
            try {
                const settingsStr = localStorage.getItem('soulofwaifu_settings');
                if (settingsStr) {
                    return JSON.parse(settingsStr);
                }
            } catch (e) {
                console.warn("Не удалось загрузить настройки из localStorage:", e);
            }
            return { theme: 'dark', language: 'ru' };
        }
        function applySettings(settings) {
            if (settings.theme === 'light') {
                document.body.classList.add('light-theme');
                const logoDark = document.querySelector('.logo-dark');
                const logoLight = document.querySelector('.logo-light');
                if (logoDark) logoDark.style.display = 'none';
                if (logoLight) logoLight.style.display = 'block';
            } else {
                document.body.classList.remove('light-theme');
                const logoDark = document.querySelector('.logo-dark');
                const logoLight = document.querySelector('.logo-light');
                if (logoDark) logoDark.style.display = 'block';
                if (logoLight) logoLight.style.display = 'none';
            }
            updateLanguage(settings.language);
            if (document.getElementById('languageSelector')) {
                document.getElementById('languageSelector').value = settings.language;
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    document.body.classList.toggle('light-theme');
                    const logoDark = document.querySelector('.logo-dark');
                    const logoLight = document.querySelector('.logo-light');
                    if (document.body.classList.contains('light-theme')) {
                        if (logoDark) logoDark.style.display = 'none';
                        if (logoLight) logoLight.style.display = 'block';
                    } else {
                        if (logoDark) logoDark.style.display = 'block';
                        if (logoLight) logoLight.style.display = 'none';
                    }
                    const currentLang = document.getElementById('languageSelector') ? document.getElementById('languageSelector').value : 'ru';
                    const currentTheme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                    saveSettings({ theme: currentTheme, language: currentLang });
                });
            }
            const languageSelector = document.getElementById('languageSelector');
            if (languageSelector) {
                languageSelector.addEventListener('change', function() {
                    const selectedLang = this.value;
                    updateLanguage(selectedLang);
                    const currentTheme = document.body.classList.contains('light-theme') ? 'light' : 'dark';
                    saveSettings({ theme: currentTheme, language: selectedLang });
                });
            }
            const savedSettings = loadSettings();
            applySettings(savedSettings);
            const currentPagePath = window.location.pathname; 
            const sidebarLinks = document.querySelectorAll('.doc-sidebar a');
            sidebarLinks.forEach(link => {
                try {
                    const linkPath = new URL(link.href, window.location.origin).pathname;
                    link.classList.remove('active');
                    if (currentPagePath === linkPath || 
                        currentPagePath === linkPath.replace('/index.html', '/') ||
                        (currentPagePath.endsWith('/') && linkPath.endsWith('/index.html')) ||
                        (currentPagePath === '/' && linkPath.includes('overview.html'))) {
                        link.classList.add('active');
                    }
                } catch (e) {
                    if (link.getAttribute('href').startsWith('#')) {
                        const currentHash = window.location.hash;
                        if (link.getAttribute('href') === currentHash) {
                            link.classList.add('active');
                        }
                    }
                }
            });
        });
        function updateLanguage(lang) {
            const t = translations[lang];
            if (!t) return;
            document.querySelectorAll('[data-translate-key]').forEach(element => {
                const key = element.getAttribute('data-translate-key');
                if (t[key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = t[key];
                    } else {
                        element.textContent = t[key];
                    }
                }
            });
            document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (t[key]) {
                    element.placeholder = t[key];
                }
            });
            document.querySelectorAll('[data-translate-title]').forEach(element => {
                const key = element.getAttribute('data-translate-title');
                if (t[key]) {
                    element.title = t[key];
                }
            });
            document.querySelectorAll('[data-translate-alt]').forEach(element => {
                const key = element.getAttribute('data-translate-alt');
                if (t[key]) {
                    element.alt = t[key];
                }
            });
            const prevLink = document.querySelector('.pagination-prev');
            if (prevLink) {
                prevLink.innerHTML = `<i class="fas fa-arrow-left"></i> ${t.paginationPrev || 'Installation'}`;
            }
            const nextLink = document.querySelector('.pagination-next');
            if (nextLink) {
                nextLink.innerHTML = `${t.paginationNext || 'Character Creation'} <i class="fas fa-arrow-right"></i>`;
            }
            document.title = t.pageTitle || "Text-to-Speech - Soul of Waifu Documentation";
        }
    </script>
</body>
</html>
